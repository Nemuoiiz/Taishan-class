<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>

        const wait = (ms, ok) => {
            return new Promise((resolve, reject) => {
                // åœ¨ç­‰å¾…çš„æ™‚é–“éŽå¾Œï¼ŒåŽ»åˆ¤æ–· ok æˆ–æ˜¯ ä¸ ok
                setTimeout(() => {
                    if (ok) {
                        resolve('ok' + ms)
                    } else {
                        reject(new Error('no ok' + ms))
                    }
                }, ms)
            })
        }

        // ðŸ’¡
        // 1ï¸âƒ£ Promise.all() ä¸€å€‹éŒ¯èª¤æ™‚å…¨éƒ¨ç•¶ä½œå¤±æ•—é€²å…¥.catch
        // 2ï¸âƒ£ Promise.allSettled() å…¨éƒ¨ç•¶ä½œæˆåŠŸé€²å…¥.then
        // 3ï¸âƒ£ promise.any() æˆåŠŸåªå–ç¬¬ä¸€å€‹å€¼ï¼Œå…¨éƒ¨å¤±æ•—æœƒé€²å…¥.catchï¼Œä½†ä¸æœƒé¡¯ç¤ºæ˜¯å“ªå€‹éŒ¯èª¤

        // // 1ï¸âƒ£ Promise.all(Promiseé™£åˆ—)
        // // åŒæ™‚åŸ·è¡Œ Promise => ç¯€çœç­‰å¾…æ™‚é–“
        // // æ‰€æœ‰æ±è¥¿éƒ½ resolve æ‰æœƒ .then
        // // åªè¦æœ‰ä¸€å€‹ reject å°±æœƒ .catch
        // Promise.all([
        //     // æœƒç…§ promise çš„é™£åˆ—é †åºå›žå‚³ï¼Œä¸æ˜¯ç…§æ™‚é–“
        //     wait(3000, true),
        //     wait(1000, true),
        //     wait(2000, true),
        // ])

        //     .then(result => {
        //         console.log(result)
        //     })
        //     .catch(error => {
        //         console.log(error)
        //     })

        // // 2ï¸âƒ£ Promise.allSettled(Promiseé™£åˆ—)
        // // åŒæ™‚åŸ·è¡Œ Promise => ç¯€çœç­‰å¾…æ™‚é–“
        // // æ‰€æœ‰æ±è¥¿éƒ½ resolve æ‰æœƒ .then
        // // .then ä»¥ status ä»£è¡¨æˆåŠŸæˆ–å¤±æ•—
        // // fulfilled æˆåŠŸï¼Œvalue  ä»£è¡¨çµæžœå€¼
        // // rejected  å¤±æ•—ï¼Œreason ä»£è¡¨åŽŸå› 
        // Promise.allSettled([
        //     wait(3000, true),
        //     wait(2000, false),
        //     wait(1000, true),
        // ])

        //     // æ²’æœ‰ .catch
        //     .then(result => {
        //         console.log(result)
        //     })

        // // 3ï¸âƒ£ promise.any(Promiseé™£åˆ—)
        // // å–ç¬¬ä¸€å€‹ resolve çš„æ±è¥¿åˆ° .then()
        // // å¦‚æžœå…¨éƒ¨å¤±æ•—æœƒåˆ° .catch()ï¼ŒéŒ¯èª¤æ˜¯ all promises were rejected
        // Promise.any([
        //     wait(3000, false),
        //     wait(2000, false),
        //     wait(1000, false),
        // ])

        //     .then(result => {
        //         console.log(result)
        //     })
        //     .catch(error => {
        //         console.log(error)
        //     })

        // 4ï¸âƒ£ Promise.race(Promiseé™£åˆ—)
        // å–ç¬¬ä¸€å€‹æœ‰çµæžœçš„ (æ™‚é–“åˆ°å…ˆå‡ºä¾†çš„ç¬¬ä¸€å€‹)
        Promise.race([
            wait(3000, true),
            wait(2000, false),
            wait(1000, true),
        ])

            .then(result => {
                console.log(result)
            })
            .catch(error => {
                console.log(error)
            })
    </script>
</body>

</html>