<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <!-- ğŸ”¶---------------------------------------------------- -->
    <div id="app">
        <!--
        ğŸ”» @apple="number=$event" => ç›£è½äº‹ä»¶
        ç•¶åµæ¸¬åˆ°'apple'äº‹ä»¶ç™¼ç”Ÿæ™‚ï¼Œäº‹ä»¶ç‰©ä»¶æœƒæ˜¯å…ƒä»¶å¸¶å‡ºä¾†çš„è³‡æ–™ -->
        <Plus :data="number" @apple="number=$event"></Plus>

        <!-- åœ¨ node.js å¯ä»¥é€™æ¨£å¯«ï¼Œjs è£¡é¢ä¸è¡Œâ¤µï¸ -->
        <!-- <PlusPlus v-model:data="number"></PlusPlus> -->
        <!-- v-model é›™å‘ç¶å®šâ¤µï¸ -->
        <Plus-plus v-model:data="number"></Plus-plus>
    </div>


    <!-- ğŸ”¶---------------------------------------------------- -->

    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>

    <!-- .component('Plus', {}) -->
    <script type="text/x-template" id="plus">
        <input type="button" :value="data" @click="plus">
    </script>

    <!-- .component('PlusPlus', {}) -->
    <script type="text/x-template" id="plusplus">
        <input type="button" :value="d" @click="d += 100">
    </script>

    <!-- ğŸ”¶---------------------------------------------------- -->
    <script>
        const { createApp, ref } = Vue

        createApp({
            setup() {
                const number = ref(100)
                return { number }
            }
        })
            .component('Plus', {
                template: '#plus',
                // ğŸ”» å¤–éƒ¨å‚³é€²ä¾†çš„è³‡æ–™
                props: ['data'],
                // é¸é …å¼å¯«æ³• (ä¸ç”¨è¨˜ï¼Œä»¥å¾Œéƒ½ç”¨ setup)
                // methods: {
                //     plus() {
                //         this.$emit('apple', this.data + 100)
                //     }
                // },

                // ctx å…¨ç¨±ç‚ºã€Œcontextã€ï¼Œæ˜¯ setup å‡½æ•¸ä¸­åŒ…å«å¤šå€‹å·¥å…·å’Œå±¬æ€§çš„ç‰©ä»¶
                // å®ƒåŒ…å«ä»¥ä¸‹å¸¸è¦‹å…§å®¹ï¼š
                // attrsï¼šçˆ¶å±¤å‚³å…¥çš„é props å±¬æ€§ã€‚
                // slotsï¼šæ’æ§½å…§å®¹ã€‚
                // emitï¼šç”¨æ–¼è§¸ç™¼äº‹ä»¶ã€‚
                // exposeï¼šç”¨ä¾†æš´éœ²å…§éƒ¨æ–¹æ³•æˆ–å±¬æ€§çµ¦å¤–éƒ¨ã€‚

                // setup(props, ctx) {
                setup(props, { emit }) {
                    const plus = () => {
                        // ğŸ”» props å”¯ç¨ï¼Œä¸èƒ½ç›´æ¥ä¿®æ”¹
                        // props.data += 100
                        // console.log(ctx)

                        // ğŸ”» emit => äº‹ä»¶ç™¼å°„ (è§¸ç™¼ä¸€å€‹å­—å®šçš„äº‹ä»¶ï¼ŒæŠŠè³‡æ–™å‚³å‡ºå»ï¼Œå‘Šè¨´å¤–å±¤ä¿®æ”¹è³‡æ–™)
                        emit('apple', props.data + 100)
                    }
                    return { plus }
                }
            })
            .component('PlusPlus', {
                template: '#plusplus',
                props: ['data'],
                setup(props, { emit }) {
                    const d = computed({
                        // è³‡æ–™å¦‚ä½•ç”¢ç”Ÿ
                        get() {
                            return props.data
                        },
                        // ä¿®æ”¹å€¼çš„æ™‚å€™æ€éº¼è™•ç†
                        set(value) {
                            // é…åˆ v-model ä½¿ç”¨çš„å›ºå®šæ ¼å¼
                            // emit(update:propå, ä¿®æ”¹çš„å€¼)â¤µï¸
                            emit('update:date', value)
                        }
                    })
                    return { d }
                }
            })
            .mount('#app')
    </script>
</body>

</html>